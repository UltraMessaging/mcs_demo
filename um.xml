<?xml version="1.0" encoding="UTF-8" ?>
<um-configuration version="1.0">
  <templates>
    <template name="um_perf">
      <options type="context">
        <option name="default_interface" default-value="10.29.4.0/24"/>
        <option name="request_tcp_interface" default-value="10.29.4.0/24"/>
        <option name="mim_incoming_address" default-value="0.0.0.0"/>
        <option name="transport_lbtrm_data_rate_limit" default-value="100000000000"/>
        <option name="transport_lbtrm_receiver_socket_buffer" default-value="128000000"/>
        <option name="dynamic_fragmentation_reduction" default-value="1"/>
        <option name="transport_lbtrm_datagram_max_size" default-value="1472"/>
        <option name="fd_management_type" default-value="epoll"/>
        <option name="multiple_receive_maximum_datagrams" default-value="100"/>
        <option name="transport_lbtrm_recycle_receive_buffers" default-value="1"/>
        <option name="request_tcp_port_low" default-value="14391"/>
        <option name="request_tcp_port_high" default-value="14499"/>
        <option name="request_tcp_reuseaddr" default-value="1"/>
      </options>
      <options type="source">
        <option name="transport" default-value="lbtrm"/>
        <option name="transport_lbtrm_sm_maximum_interval" default-value="2000"/>
        <option name="implicit_batching_minimum_length" default-value="1"/>
        <option name="retransmit_retention_size_limit" default-value="71000000"/>
        <option name="ume_message_stability_timeout" default-value="0"/>
        <option name="ume_flight_size" default-value="100000"/>
        <option name="ume_flight_size_bytes" default-value="140000000"/>
        <!-- Quickly clean up exited sources for ease of testing. Typically do NOT
             want to do this! -->
        <option name="ume_activity_timeout" default-value="6000"/>
      </options>
      <options type="receiver">
        <option name="delivery_control_maximum_burst_loss" default-value="100000000"/>
        <option name="transport_lbtrm_nak_generation_interval" default-value="1"/>
        <option name="transport_lbtrm_send_naks" default-value="0"/>
        <option name="use_otr" default-value="0"/>
        <!-- To make testing quicker, time out LBTRM after 5.2 sec (lbmpong sleeps
             5 sec before first send; don't time out too soon). Typically do NOT
             want to do this! -->
        <option name="transport_lbtrm_activity_timeout" default-value="5200"/>
      </options>
    </template>
    <template name="res_trd1">
      <options type="context">
        <option name="resolver_service" default-value="10.29.4.101:12601"/>
        <option name="resolver_disable_udp_topic_resolution" default-value="1"/>
      </options>
    </template>
    <template name="res_trd2">
      <options type="context">
        <option name="resolver_multicast_interface" default-value="10.29.4.0/24"/>
        <option name="resolver_multicast_address" default-value="239.101.3.1"/>
      </options>
    </template>
    <template name="um_mon">
      <options type="context">
        <option name="monitor_format" default-value="pb"/>
        <option name="monitor_interval" default-value="5"/>
        <option name="monitor_transport" default-value="lbm"/>
        <option name="monitor_transport_opts" default-value="config=mon.cfg"/>
      </options>
    </template>
  </templates>

  <applications>
    <application name="umesrc" template="um_perf,um_mon,res_trd1">
      <contexts>
        <context>
          <sources>
            <topic topicname="topic1">
              <options type="source">
                <option name="transport_lbtrm_multicast_address" default-value="239.101.3.2"/>
                <option name="ume_store_name" default-value="store_topic1"/>
              </options>
            </topic>
          </sources>
        </context>
      </contexts>
    </application>

    <application name="umercv" template="um_perf,um_mon,res_trd2">
      <contexts>
        <context>
          <sources>
          </sources>
          <receivers>
          </receivers>
        </context>
      </contexts>
    </application>

    <application name="tnwgd" template="um_perf">
      <contexts>
        <context name="TRD1" template="res_trd1">
          <options type="context">
          </options>
        </context>
        <context name="TRD2" template="res_trd2">
          <options type="context">
          </options>
        </context>
      </contexts>
    </application>

    <application name="umestored" template="um_perf,um_mon,res_trd1">
      <contexts>
      </contexts>
    </application>
  </applications>
</um-configuration>
